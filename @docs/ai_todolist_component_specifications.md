# AI 驅動 TodoList 系統組件規格文檔

本文檔詳細說明 AI 驅動 TodoList 系統中主要 UI 組件的設計規格。

## 目錄

1. [AI 建議卡片組件](#1-ai-建議卡片組件)
2. [智能儀表板組件](#2-智能儀表板組件)
3. [AI 助手對話組件](#3-ai-助手對話組件)
4. [智能任務列表組件](#4-智能任務列表組件)
5. [智能規劃視圖組件](#5-智能規劃視圖組件)
6. [進度分析組件](#6-進度分析組件)
7. [AI 設置面板組件](#7-ai-設置面板組件)

---

## 1. AI 建議卡片組件

### 1.1 元件定義

**名稱**: `AISuggestionCard`
**目的**: 顯示 AI 生成的建議任務，提供快速操作功能
**父組件**: 建議確認頁面、儀表板

### 1.2 屬性 (Props)

| 屬性名          | 類型                   | 必填 | 說明                              |
| --------------- | ---------------------- | ---- | --------------------------------- |
| suggestion      | AITaskSuggestion       | 是   | AI 建議數據                       |
| onAccept        | (id: string) => void   | 是   | 接受建議的回調函數                |
| onReject        | (id: string) => void   | 是   | 拒絕建議的回調函數                |
| onModify        | (id: string) => void   | 是   | 修改建議的回調函數                |
| showDetailLevel | 'simple' \| 'detailed' | 否   | 控制顯示內容詳細程度，默認 simple |
| className       | string                 | 否   | 自定義樣式類                      |

### 1.3 狀態 (State)

| 狀態名       | 類型    | 初始值 | 說明                  |
| ------------ | ------- | ------ | --------------------- |
| isExpanded   | boolean | false  | 控制詳情展開/收起狀態 |
| isHovered    | boolean | false  | 鼠標懸停狀態          |
| feedbackMode | boolean | false  | 是否顯示反饋輸入      |

### 1.4 設計規格

#### 視覺設計

- 卡片使用圓角矩形 (border-radius: 8px)
- 左側邊框顏色基於 AI 建議信心級別
- 最小高度: 120px，最大高度: 無限制
- 寬度: 100% (容器自適應)

#### 內容結構

1. **頂部**: 標題區域 + 信心指標
2. **中間**: 描述內容 + AI 建議理由
3. **底部**: 操作按鈕 (接受/調整/拒絕)

#### 交互行為

- 點擊卡片空白區域 → 展開/收起詳情
- 懸停卡片 → 輕微陰影增強
- 點擊操作按鈕 → 觸發相應回調

### 1.5 變體

1. **簡潔模式**: 只顯示標題和基本信息，適用於儀表板
2. **詳細模式**: 顯示完整信息，適用於建議確認頁
3. **已確認模式**: 接受/拒絕後的視覺反饋

### 1.6 代碼結構

```tsx
import React, { useState } from "react";
import { motion } from "framer-motion";
import { AITaskSuggestion, AIConfidenceLevel } from "../services/ai/types";

type AISuggestionCardProps = {
  suggestion: AITaskSuggestion;
  onAccept: (id: string) => void;
  onReject: (id: string) => void;
  onModify: (id: string) => void;
  showDetailLevel?: "simple" | "detailed";
  className?: string;
};

export default function AISuggestionCard({ suggestion, onAccept, onReject, onModify, showDetailLevel = "simple", className = "" }: AISuggestionCardProps) {
  const [isExpanded, setIsExpanded] = useState(false);
  const [isHovered, setIsHovered] = useState(false);

  // 組件實現...
}
```

---

## 2. 智能儀表板組件

### 2.1 元件定義

**名稱**: `AIDashboard`
**目的**: 提供用戶個性化的 AI 智能概覽和建議
**頁面**: 主頁/儀表板頁

### 2.2 子組件

1. **個性化問候區**: 根據時間、用戶數據生成的問候語
2. **待確認建議列表**: 等待用戶確認的 AI 建議
3. **智能洞察卡片**: 生產力分析和工作模式洞察
4. **當日任務預覽**: 顯示今日計劃的任務
5. **效率提示**: 簡短的效率提升建議

### 2.3 數據需求

| 數據名             | 類型                  | 來源            | 說明           |
| ------------------ | --------------------- | --------------- | -------------- |
| pendingSuggestions | AITaskSuggestion[]    | AI 服務         | 待確認建議     |
| todayTasks         | Todo[]                | 任務存儲        | 今日任務       |
| userInsights       | UserBehaviorPattern[] | AI 行為分析服務 | 用戶行為洞察   |
| efficiencyTips     | string[]              | AI 提示服務     | 效率提升小貼士 |

### 2.4 設計規格

#### 布局結構

- 網格布局 (CSS Grid)
- 桌面：3 欄 (左側邊欄、中央內容區、右側洞察區)
- 平板：2 欄 (主內容區、輔助內容區)
- 移動端：單欄 (重要性堆疊)

#### 響應式斷點

- 移動端: < 768px
- 平板: 768px - 1024px
- 桌面: > 1024px

#### 區塊佈置

1. **頂部區域**: 個性化問候 + AI 助手入口
2. **左側區域**: 今日任務 + 本週計劃
3. **中央區域**: 待確認 AI 建議
4. **右側區域**: 智能洞察 + 效率提示
5. **底部區域**: 快速行動按鈕

### 2.5 交互行為

- 點擊建議卡片 → 展開詳情或跳轉到建議確認頁
- 滑動任務卡片 → 標記完成/刪除
- 下拉刷新 → 獲取最新建議和洞察
- 點擊 AI 助手按鈕 → 打開助手對話框

---

## 3. AI 助手對話組件

### 3.1 元件定義

**名稱**: `AIAssistantChat`
**目的**: 提供自然語言對話式任務創建和管理
**使用位置**: 全局浮動組件

### 3.2 屬性 (Props)

| 屬性名        | 類型                 | 必填 | 說明                     |
| ------------- | -------------------- | ---- | ------------------------ |
| isOpen        | boolean              | 是   | 控制對話框開關           |
| onClose       | () => void           | 是   | 關閉對話框的回調函數     |
| onTaskCreated | (task: Todo) => void | 否   | 任務創建成功後的回調函數 |
| contextInfo   | object               | 否   | 當前頁面上下文信息       |

### 3.3 狀態 (State)

| 狀態名         | 類型             | 初始值 | 說明             |
| -------------- | ---------------- | ------ | ---------------- |
| messages       | ChatMessage[]    | []     | 對話記錄         |
| inputText      | string           | ''     | 輸入框文本       |
| isProcessing   | boolean          | false  | 是否正在處理中   |
| recognizedTask | AITaskSuggestion | null   | 識別出的任務數據 |
| recordingAudio | boolean          | false  | 是否正在錄音     |

### 3.4 設計規格

#### 視覺設計

- 固定於右下角的浮動按鈕 (閉合狀態)
- 展開為圓角卡片 (開啟狀態)
- 最小尺寸: 360px×450px (桌面)
- 移動端: 全屏覆蓋對話模式

#### 內容結構

1. **頂部**: 標題欄 + 關閉按鈕
2. **中間**: 訊息列表區域 (對話內容)
3. **底部**: 輸入區域 + 語音輸入按鈕 + 發送按鈕

#### 對話氣泡類型

1. **用戶消息**: 右側對齊，背景色深
2. **AI 消息**: 左側對齊，背景色淺
3. **任務確認卡片**: 結構化任務預覽，帶確認按鈕

### 3.5 交互行為

- 點擊浮動按鈕 → 展開/收起對話框
- 文本輸入 + 發送 → 添加用戶消息並獲取 AI 回應
- 點擊麥克風按鈕 → 開始/結束語音輸入
- 點擊任務確認卡片中的確認 → 創建任務並反饋

---

## 4. 智能任務列表組件

### 4.1 元件定義

**名稱**: `SmartTodoList`
**目的**: 智能組織和展示任務列表，顯示 AI 分組和優先級
**頁面**: 任務頁、儀表板、日程視圖

### 4.2 屬性 (Props)

| 屬性名           | 類型                       | 必填 | 說明                          |
| ---------------- | -------------------------- | ---- | ----------------------------- |
| tasks            | Todo[]                     | 是   | 任務數據                      |
| title            | string                     | 否   | 列表標題                      |
| emptyMessage     | string                     | 否   | 無任務時顯示的訊息            |
| groupingStrategy | 'ai' \| 'manual' \| 'none' | 否   | 分組策略，默認 'ai'           |
| showAIMetadata   | boolean                    | 否   | 是否顯示 AI 元數據，默認 true |
| onTaskAction     | (action, taskId) => void   | 是   | 任務操作處理函數              |

### 4.3 狀態 (State)

| 狀態名         | 類型                    | 初始值 | 說明              |
| -------------- | ----------------------- | ------ | ----------------- |
| groupedTasks   | Record<string, Todo[]>  | {}     | 分組後的任務      |
| expandedGroups | Record<string, boolean> | {}     | 分組展開/收起狀態 |
| draggedTaskId  | string \| null          | null   | 當前拖拽任務的 ID |

### 4.4 設計規格

#### 視覺設計

- 每個分組使用視覺分隔
- 重要分組使用強調色
- 任務卡片緊湊佈局
- AI 標記使用輕微視覺指示器

#### 智能分組邏輯

1. **緊急任務**: 高優先級且即將截止
2. **今日任務**: 排期在今天的任務
3. **即將到期**: 未來幾天的任務
4. **最佳精力匹配**: 基於用戶精力曲線和任務特性
5. **已完成任務**: 顯示在底部

#### 任務卡片元素

1. **視覺標記**: 優先級、截止日期、標籤
2. **時間智能標記**: 推薦執行時間標記
3. **AI 信心指示器**: 表示 AI 推薦的確信度
4. **關聯任務指示**: 視覺化任務間關聯

### 4.5 交互行為

- 拖放任務 → 改變排序或分組
- 左滑任務 → 標記完成
- 右滑任務 → 顯示更多操作
- 長按任務 → 進入快速編輯模式
- 點擊分組標題 → 展開/收起分組

---

## 5. 智能規劃視圖組件

### 5.1 元件定義

**名稱**: `AIPlanner`
**目的**: 提供 AI 優化的任務時間規劃視圖
**頁面**: 規劃頁

### 5.2 子組件

1. **時間網格**: 可視化日程表格
2. **任務池**: 未分配時間的任務列表
3. **日期導航**: 日/週/月視圖切換
4. **規劃控制面板**: 調整 AI 規劃參數

### 5.3 屬性 (Props)

| 屬性名         | 類型                       | 必填 | 說明                  |
| -------------- | -------------------------- | ---- | --------------------- |
| tasks          | Todo[]                     | 是   | 所有任務數據          |
| events         | CalendarEvent[]            | 否   | 日曆事件數據          |
| viewMode       | 'day' \| 'week' \| 'month' | 否   | 視圖模式，默認 'week' |
| selectedDate   | Date                       | 否   | 選中的日期            |
| onPlanAccepted | (plan) => void             | 否   | 用戶接受規劃後的回調  |

### 5.4 設計規格

#### 視覺設計

- 日曆網格佈局
- 工作負載使用熱力圖顏色編碼
- 可拖拽任務卡片
- 視覺化時間段區分

#### 時間視圖結構

1. **日視圖**: 24 小時詳細時間軸
2. **週視圖**: 7 天 × 時段矩陣
3. **月視圖**: 月曆式概覽

#### 智能時間分配特性

1. **工作負載均衡**: 視覺化工作量分佈
2. **精力匹配**: 根據用戶精力曲線分配任務
3. **時間衝突標記**: 視覺化標記時間衝突
4. **彈性時間建議**: 顯示最佳/次佳執行時間

### 5.5 交互行為

- 拖拽任務至時間格 → 分配時間
- 調整任務卡片大小 → 更改預計執行時長
- 點擊 AI 規劃按鈕 → 觸發自動規劃
- 雙擊時間格 → 添加新任務
- 點擊任務卡片 → 查看/編輯任務詳情

---

## 6. 進度分析組件

### 6.1 元件定義

**名稱**: `AIAnalyticsDashboard`
**目的**: 展示 AI 分析的生產力數據和模式
**頁面**: 分析頁

### 6.2 子組件

1. **概覽指標**: 關鍵績效指標摘要
2. **趨勢圖表**: 生產力和完成率趨勢
3. **模式識別卡片**: 檢測到的行為模式
4. **時間使用分析**: 任務類型和時間分配
5. **AI 改進建議**: 基於數據的優化建議

### 6.3 屬性 (Props)

| 屬性名            | 類型                  | 必填 | 說明                 |
| ----------------- | --------------------- | ---- | -------------------- |
| analyticsData     | AnalyticsData         | 是   | 分析數據             |
| timeRange         | [Date, Date]          | 否   | 分析時間範圍         |
| detectedPatterns  | UserBehaviorPattern[] | 否   | 檢測到的用戶行為模式 |
| onTimeRangeChange | (range) => void       | 否   | 時間範圍變更回調     |

### 6.4 設計規格

#### 視覺設計

- 卡片式分區佈局
- 數據可視化圖表為主
- 簡潔的數據標籤
- 清晰的改進建議卡片

#### 頁面結構

1. **頂部**: 時間範圍選擇器 + 關鍵指標摘要
2. **左側**: 趨勢圖表 + 圖例
3. **右側**: 模式識別卡片列表
4. **底部**: 詳細數據表格和導出選項

#### 數據可視化類型

1. **折線圖**: 趨勢分析
2. **熱力圖**: 時間模式分析
3. **環形圖**: 類別分佈分析
4. **雷達圖**: 能力平衡分析

### 6.5 交互行為

- 選擇時間範圍 → 更新所有數據視圖
- 懸停數據點 → 顯示詳細信息
- 點擊模式卡片 → 展開詳細解釋
- 點擊切換按鈕 → 改變圖表類型
- 點擊導出按鈕 → 下載分析報告

---

## 7. AI 設置面板組件

### 7.1 元件定義

**名稱**: `AISettingsPanel`
**目的**: 讓用戶配置和訓練 AI 系統
**頁面**: AI 設置頁

### 7.2 子組件

1. **AI 學習進度**: 展示 AI 學習狀態
2. **參數控制面板**: 調整 AI 決策參數
3. **數據源管理**: 控制 AI 可訪問的數據
4. **隱私設置**: 數據使用和隱私控制
5. **手動訓練界面**: 直接提供反饋訓練 AI

### 7.3 屬性 (Props)

| 屬性名           | 類型                   | 必填 | 說明                   |
| ---------------- | ---------------------- | ---- | ---------------------- |
| settings         | AISystemSettings       | 是   | 當前 AI 設置           |
| learningProgress | AILearningProgress     | 是   | AI 學習進度數據        |
| onSettingsChange | (settings) => void     | 是   | 設置變更回調           |
| onManualTraining | (trainingData) => void | 否   | 提交手動訓練數據的回調 |

### 7.4 設計規格

#### 視覺設計

- 分頁籤或手風琴式設置分區
- 視覺化學習進度指標
- 直觀的開關和滑塊控件
- 清晰的權限描述

#### 頁面結構

1. **頂部**: 學習進度概覽圖表
2. **左側**: 設置類別導航
3. **中央**: 當前選中類別的設置控件
4. **右側**: 設置變更預覽和影響說明
5. **底部**: 保存/重置/恢復默認按鈕

#### 主要設置類別

1. **AI 個性**: 從保守到積極的決策風格
2. **功能開關**: 啟用/禁用特定 AI 功能
3. **數據源**: 控制 AI 訪問的數據範圍
4. **通知頻率**: 調整 AI 通知和建議頻率
5. **隱私級別**: 從最大隱私到最大個性化

### 7.5 交互行為

- 調整滑塊 → 即時預覽效果變更
- 開啟/關閉開關 → 啟用/禁用對應功能
- 點擊數據源卡片 → 展開詳細權限設置
- 提交訓練實例 → 增強 AI 對特定情境的理解
- 點擊重置按鈕 → 恢復默認設置

---

**文檔版本**: 1.0
**最後更新**: 2023/5/12
**作者**: AI 驅動 TodoList 系統設計團隊
